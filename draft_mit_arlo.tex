\documentclass[10pt,a5paper, openany]{book}

% ---------- Font Selection ----------
% Uncomment ONE of the following options:%\newcommand{\fontversion}{serif}    % Times-like (default)
\newcommand{\fontversion}{sansserif} % Sans serif

% ---------- Packages ----------
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc} % omit if you use lualatex/xelatex
\usepackage[ngerman,english]{babel} % pick languages as needed
\usepackage[a5paper,top=3cm,bottom=1.5cm,left=1.5cm,right=1.5cm,headsep=1cm,headheight=14pt]{geometry} % increased top margin and head separation
\usepackage{xparse}
\usepackage{booktabs} % nicer tables (optional)
\usepackage{multirow}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{colortbl} % enables \rowcolor
\usepackage{grffile}
\usepackage{wrapfig} % for text wrapping around figures
\usepackage{fancyhdr} % for headers and footers
\usepackage{ifoddpage} % for checking odd/even pages correctly
\usepackage{eso-pic} % for absolute positioning on pages
\usepackage{titlesec}
\titleformat{\chapter}[display]
  {\normalfont\Large\bfseries}{\chaptertitlename\ \thechapter}{20pt}{\Large}

% ---------- Font configuration ----------
\usepackage{ifthen}
\ifthenelse{\equal{\fontversion}{sansserif}}{
  % Sans serif option - Futura-like (TeX Gyre Adventor)
  \usepackage{tgadventor}  % Futura-like geometric sans serif
  \renewcommand{\familydefault}{\sfdefault}
}{
  % Serif option (Times-like)
  \usepackage{mathptmx}    % Times for text and math
}

% ---------- Macro definitions ----------
\input{old_macros.tex}

% ---------- Counter for dog entries per page ----------
\newcounter{dogcount}
\setcounter{dogcount}{0}
\newif\iffirstdogpage  % Boolean flag for first page of dog entries
\firstdogpagetrue      % Set to true initially

% ---------- \DogDataMinipage helper macro ----------
% \DogDataMinipage{Breeder}{DOB}{RegNr}{Sire}{Dam}
% Creates a minipage with dog data formatted consistently
\NewDocumentCommand{\DogDataMinipage}{ m m m m m }{%
  \def\breederlocal{#1} %
  \def\doblocal{#2} %
  \def\regnrlocal{#3} %
  \def\sirelocal{#4} %
  \def\damlocal{#5} %  
  \begin{minipage}[t]{0.60\textwidth}
    \vspace{0pt}%
    \textbf{Reg. Nr:} \regnrlocal \hfill \textbf{DOB:} \doblocal\\
    \textbf{Breeder:} \breederlocal\\
    \textbf{Sire:} \sirelocal\\
    \textbf{Dam:} \damlocal
  \end{minipage}%
}

% ---------- \DogCaption definition ----------
% \DogCaption{Name}{Handler}{Breeder}{DOB}{RegNr}{Sire}{Dam}{PhotoPath}
% Displays dog photo on the left with information as a caption on the right
\NewDocumentCommand{\DogCaption}{ m m m m m m m m }{%
  \def\dogname{#1} %
  \def\handler{#2} %
  \def\breeder{#3} %
  \def\dob{#4} %
  \def\regnr{#5} %
  \def\sire{#6} %
  \def\dam{#7} %
  \def\photopath{#8} %
  \noindent
  % Grey bar with dog's name and handler's name
  \colorbox{darkgray}{\parbox{\dimexpr\textwidth-2\fboxsep}{%
    \color{white}\textbf{\dogname} \hfill \textbf{Handler:} \handler}}\\[0.1em]
  % Picture and information side by side below the bar
  \noindent\begin{minipage}[t]{0.35\textwidth}
    \vspace{0pt}%
    \includegraphics[width=\textwidth,height=4cm,keepaspectratio]{\photopath}
  \end{minipage}\hfill\DogDataMinipage{\breeder}{\dob}{\regnr}{\sire}{\dam}
  
  \vspace{0.5em}
}

% ---------- \DogCaptionReverse definition ----------
% \DogCaptionReverse{Name}{Handler}{Breeder}{DOB}{RegNr}{Sire}{Dam}{PhotoPath}
% Displays dog photo on the RIGHT with information as a caption on the LEFT (mirrored)
\NewDocumentCommand{\DogCaptionReverse}{ m m m m m m m m }{%
  \def\dognamer{#1} %
  \def\handlerr{#2} %
  \def\breederr{#3} %
  \def\dobr{#4} %
  \def\regnrr{#5} %
  \def\sirer{#6} %
  \def\damr{#7} %
  \def\photopathr{#8} %
  \noindent
  % Grey bar with dog's name and handler's name
  \colorbox{darkgray}{\parbox{\dimexpr\textwidth-2\fboxsep}{%
    \color{white}\textbf{\dognamer} \hfill \textbf{Handler:} \handlerr}}\\[0.1em]
  % Information on the LEFT and picture on the RIGHT (reversed)
  \noindent\DogDataMinipage{\breederr}{\dobr}{\regnrr}{\sirer}{\damr}\hfill\begin{minipage}[t]{0.35\textwidth}
    \vspace{0pt}%
    \includegraphics[width=\textwidth,height=4cm,keepaspectratio]{\photopathr}
  \end{minipage}
  
  \vspace{0.5em}
}

% ---------- \DogCaptionAuto definition ----------
% \DogCaptionAuto{Name}{Handler}{Breeder}{DOB}{RegNr}{Sire}{Dam}{PhotoPath}
% Automatically uses \DogCaption on even pages and \DogCaptionReverse on odd pages
% Limits to 3 entries on first page (chapter title takes space), 4 on subsequent pages
\NewDocumentCommand{\DogCaptionAuto}{ m m m m m m m m }{%
  % Check if we've reached the limit for this page
  \iffirstdogpage%
    % First page: limit is 3 entries
    \ifnum\value{dogcount}=3
      \newpage%
      \setcounter{dogcount}{0}%
      \firstdogpagefalse% % After first page break, set flag to false
    \fi%
  \else%
    % Subsequent pages: limit is 4 entries
    \ifnum\value{dogcount}=4
      \newpage%
      \setcounter{dogcount}{0}%
    \fi%
  \fi%
  % Increment counter
  \stepcounter{dogcount}%
  % Display the dog caption
  \checkoddpage%
  \ifoddpage%
    \DogCaptionReverse{#1}{#2}{#3}{#4}{#5}{#6}{#7}{#8}%
  \else%
    \DogCaption{#1}{#2}{#3}{#4}{#5}{#6}{#7}{#8}%
  \fi%
}

% ---------- Header/Footer Configuration ----------
\pagestyle{fancy}
\fancyhf{} % Clear all header and footer fields
\fancyhead[L]{\leftmark} % Chapter name on the left
\fancyhead[R]{\thepage} % Page number on the right
\renewcommand{\headrulewidth}{0.4pt} % Line below header
\renewcommand{\footrulewidth}{0pt} % No line in footer

% For chapter pages (plain style)
\fancypagestyle{plain}{%
  \fancyhf{}
  \fancyhead[L]{\leftmark}
  \fancyhead[R]{\thepage}
  \renewcommand{\headrulewidth}{0.4pt}
  \renewcommand{\footrulewidth}{0pt}
}

\begin{document}

\frontmatter

% ---------- Custom Title Page ----------
\begin{titlepage}
  % Position logo in background using absolute positioning
  \AddToShipoutPictureBG*{%
    \AtPageCenter{%
      \put(\LenToUnit{-0.40\paperwidth},\LenToUnit{-0.32\paperheight}){%
        \includegraphics[width=0.9\paperwidth]{Logos/CSC26_Logo2.jpg}%
      }%
    }%
  }
  
  \vspace*{3cm}
  
  % Title - shifted to right, left-aligned (on top of logo)
  \hspace{0.15\textwidth}
  \begin{minipage}{0.7\textwidth}
    \raggedright
    {\Huge\bfseries Continental Sheepdog\\[0.5cm] Championship 2026\par}
    
    \vspace{1cm}
    
    % Subtitle
    {\Large\itshape en Belgique\par}
  \end{minipage}
  
  \vfill
  
  % Date at bottom
  \centering
  {\large \today\par}
  
  \vspace{1cm}
  
  \vspace{1cm}
  
\end{titlepage}

\tableofcontents
\clearpage

\mainmatter
\input{welcome.tex}
\input{president.tex}
\input{visitors_map.tex}
\input{judges.tex}
\input{timetable.tex}
\input{qualifications.tex}



\chapter{Chiens et leurs maîtres - Dogs and their Handlers - Honden en hun Handlers}
\markboth{Chiens et leurs maîtres}{Chiens et leurs maîtres}

\input{entries.tex}


%\section{Automatic Layout Switching}
%
%Here are examples using \verb|\DogCaptionAuto| which automatically alternates between left and right layouts based on page number:
%\newpage
%\DogCaptionAuto
%  {Tweed}
%  {Annie Vanderlinck}
%  {S. M. Lejuez}
%  {2018-12-23}
%  {BIJL. G-2-3144869}
%  {Kemi Rhys}
%  {Eryn}
%  {PicturesOrig/AnnieVanderlinck_Tweed.jpg}
%
%\DogCaptionAuto
%  {Kinloch Luke}
%  {Folke Noertemann}
%  {Angie Driscoll}
%  {2016-03-21}
%  {2345676}
%  {Kinloch Levi}
%  {Aaron Jan}
%  {PicturesOrig/FolkeNoertemann_Luke.jpg}
%
%\DogCaptionAuto
%  {Kinloch Heath}
%  {Folke Noertemann}
%  {Angie Driscoll}
%  {2018-08-10}
%  {33333}
%  {no idea}
%  {Kinloch Penny}
%  {PicturesOrig/FolkeNoertemann_Heath.jpg}


\end{document}
